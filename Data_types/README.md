# Анализ данных Airbnb в Берлине

Этот проект содержит SQL код для анализа данных с платформы Airbnb в Берлине. 

## Инструменты

`ClickHouse`
`Type Conversion Functions` 

## Структура таблиц

### Таблица listings

Таблица `listings` хранит информацию о жилье на Airbnb, включая полные описания, характеристики и средние оценки в отзывах.

- **listing_id**: Идентификатор жилья (объявления)
- Другие столбцы, необходимые для конкретных задач

### Таблица calendar_summary

Таблица `calendar_summary` содержит данные о доступности и цене жилья по дням.

- **listing_id**: Идентификатор жилья (объявления)
- **date**: Дата
- **available**: Доступность жилья в указанный день (t/f)
- **price**: Цена за ночь

### Таблица reviews

Таблица `reviews` содержит отзывы пользователей о жилье.

- **listing_id**: Идентификатор жилья
- **id**: Идентификатор отзыва
- **date**: Дата отзыва
- **reviewer_id**: Идентификатор автора отзыва
- **reviewer_name**: Имя автора отзыва
- **comments**: Текст отзыва

---

### Выполненные задачи

1. **Определение самого популярного месяца и года регистрации новых хостов на Airbnb**  
   - Проанализированы данные по регистрации хостов, выявлен наиболее популярный месяц и год.

2. **Расчет средней частоты ответа у обычных хостов и суперхостов**  
   - Сравнены частоты ответов между обычными хостами и суперхостами для выявления закономерностей.

3. **Определение средней цены за ночь для каждого хоста на Airbnb**  
   - Рассчитана средняя цена за ночь для каждого хоста, идентификаторы сдаваемого жилья объединены в массивы.

4. **Расчет разницы между максимальной и минимальной ценой у хостов**  
   - Вычислена разница между максимальной и минимальной ценой у каждого хоста, определены топ-10 хостов с наибольшей разницей.

5. **Анализ средних цен по типу жилья**  
   - Проанализированы средние значения цены за ночь, депозита и уборки по различным типам жилья.

6. **Определение района с наименьшей стоимостью за ночь на Airbnb**  
   - Найден район города с самой низкой средней стоимостью за ночь.

7. **Анализ районов Берлина с самой большой площадью сдаваемого жилья**  
   - Определены топ-3 района Берлина с наибольшей средней площадью жилья, сдаваемого целиком.

8. **Поиск комнаты, расположенной ближе всего к центру города**  
   - Найдена комната, расположенная на минимальном расстоянии от центра города.

9. **Фильтрация объявлений по оценке и числу отзывов**  
   - Отобраны объявления с оценкой выше средней и числом отзывов в месяц меньше трех, выполнена сортировка по убыванию этих показателей.

10. **Определение комнат с расстоянием до центра меньше среднего**  
    - Рассчитано среднее расстояние до центра города, отобраны комнаты с меньшим, чем среднее, расстоянием и выполнена сортировка.

11. **Отбор объявлений по нескольким критериям**  
    - Отобраны объявления с расстоянием до центра меньше среднего, ценой до $100 в день, отзывами после 1 сентября 2018 года и наличием WiFi.

12. **Поиск доступных объявлений с выше среднего числом уникальных отзывов**  
    - Найдены доступные объявления с числом уникальных отзывов выше среднего.

13. **Классификация объявлений по удобствам и политике отмены**  
    - Создана колонка с категориями объявлений: 'good', 'ok', 'not ok' в зависимости от наличия кухни и гибкости политики отмены.

