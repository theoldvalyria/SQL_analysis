# Анализ пользовательских данных и заказов e-commerce платформы - SQL Код

## Описание

Проект включает анализ (SQL Код) данных и заказов на e-commerce платформе с целью выявления ключевых метрик, таких как размер заказов, активность пользователей, популярные товары, и время доставки. 

В рамках проекта выполнены задачи по группировке данных, расчету средних значений, фильтрации и анализу заказов, что позволило получить ценные инсайты для оптимизации работы платформы и улучшения пользовательского опыта.

## Инструменты
`PostgreSQL`  `subqueries`

## Структура таблиц
<img src="https://storage.yandexcloud.net/klms-public/production/learning-content/152/1762/17923/51794/244290/2023_01_24_214337_negate.jpg" alt="Alt text" width="520">

## Решенные задачи:

1. **Группировка заказов по месяцам**  
   - Подсчитано количество сделанных и отмененных заказов за каждый месяц.

2. **Анализ по полу и возрастным группам**  
   - Выполнена группировка пользователей по полу и возрасту, подсчитано количество пользователей в каждой подгруппе.

3. **Оценка размеров заказов**  
   - Данные сгруппированы по количеству товаров в заказах. Учитывались только заказы, оформленные по будням, с фильтрацией групп, где количество заказов превышает 2000.

4. **Расчет среднего размера заказов**  
   - Рассчитан средний размер заказа для выходных и будних дней с пометкой «weekend» и «weekdays».

5. **Анализ активности пользователей**  
   - Определено количество заказов и доля отмен для каждого пользователя. Отфильтрованы пользователи с более чем тремя заказами и высоким показателем отмен.

6. **Анализ заказов по дням недели**  
   - Рассчитано количество оформленных, отмененных и доставленных заказов, а также доля успешных заказов по дням недели.

7. **Расчет заказов пользователей**  
   - Определено количество заказов для каждого пользователя, добавлен столбец со средним числом заказов.

8. **Отбор курьеров по числу доставок**  
   - Выведена информация о курьерах, доставивших 30 и более заказов в сентябре 2022 года.

9. **Средний размер отмененных заказов**
   - Рассчитан средний размер отмененных заказов для пользователей мужского пола.
   
10. **Определение возраста пользователей**
    - Посчитан возраст пользователей в полных годах и указан средний возраст для тех, у кого не была указана дата рождения.

11. **Анализ времени доставки заказов**
    - Рассчитано время доставки для заказов с более чем 5 товарами, включено время принятия и доставки заказа.

12. **Первичные заказы пользователей**
    - Подсчитано количество первых заказов пользователей на каждую дату, учитывая только неотмененные заказы.

13. **Популярные товары**
    - С помощью функции `unnest` определено 10 самых популярных товаров в заказах, учитывая количество единиц товара.
 
14. **Заказы с дорогими товарами**
    - Выведены id и содержимое заказов, которые включают хотя бы один из пяти самых дорогих товаров в сервисе.

